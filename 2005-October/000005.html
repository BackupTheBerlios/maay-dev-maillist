<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Maay-dev] Re: [Maay-svncheckins] r229 - trunk/maay
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/maay-dev/2005-October/index.html" >
   <LINK REL="made" HREF="mailto:maay-dev%40lists.berlios.de?Subject=Re%3A%20%5BMaay-dev%5D%20Re%3A%20%5BMaay-svncheckins%5D%20r229%20-%20trunk/maay&In-Reply-To=%3C20051027062043.GA32178%40logilab.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000007.html">
   <LINK REL="Next"  HREF="000010.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Maay-dev] Re: [Maay-svncheckins] r229 - trunk/maay</H1>
    <B>Alexandre Fayolle</B> 
    <A HREF="mailto:maay-dev%40lists.berlios.de?Subject=Re%3A%20%5BMaay-dev%5D%20Re%3A%20%5BMaay-svncheckins%5D%20r229%20-%20trunk/maay&In-Reply-To=%3C20051027062043.GA32178%40logilab.fr%3E"
       TITLE="[Maay-dev] Re: [Maay-svncheckins] r229 - trunk/maay">alexandre.fayolle at logilab.fr
       </A><BR>
    <I>Thu Oct 27 08:20:43 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000007.html">[Maay-dev] [Maay-svncheckins] r229 - trunk/maay
</A></li>
        <LI>Next message: <A HREF="000010.html">[Maay-dev] Re: [Maay-svncheckins] r229 - trunk/maay
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5">[ date ]</a>
              <a href="thread.html#5">[ thread ]</a>
              <a href="subject.html#5">[ subject ]</a>
              <a href="author.html#5">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Moving the discussion to the maay-dev mailing list.


On Wed, Oct 26, 2005 at 06:37:52PM -0400, Adrien Di Mascio wrote:
&gt;<i> On 10/26/05, Aur&#233;lien Camp&#233;as &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/maay-dev">aurelien.campeas at logilab.fr</A>&gt; wrote:
</I>&gt;<i> &gt; Sorry, but this reintroduces the bug. Probably because id(cred) will
</I>&gt;<i> &gt; be different each time even if the content is the same. I'll look at a
</I>&gt;<i> &gt; whay to preserve your cache and get rid of the leak anyway, if possible.
</I>&gt;<i> 
</I>&gt;<i> I see. I should have imagined that. I guess the easiest solution would
</I>&gt;<i> then be to directly use the (creds.username, creds.password) tuple
</I>&gt;<i> as the dictionary key instead of the credential instance.
</I>&gt;<i> 
</I>&gt;<i> But ... there is still the problem (If I understood correctly from the last
</I>&gt;<i> mails / checkins) that the connection to the database is not closed
</I>&gt;<i> when the querier is not used anymore, and that should be solved.
</I>&gt;<i> 
</I>&gt;<i> BTW, why (where) do we instantiate several queriers ? Should we
</I>&gt;<i> call &quot;cnx.close()&quot; in the Querier.__del__ method ?
</I>
I may be mistaken, but this could be a side effect of twisted. I think
this kind of behaviour is part of why the twisted framework makes a high
use of class-level variables. (this is speculation on my side, which
needs to be backed up with facts). 

The other solution (less satisfactory imho, but easier to implement) is
to systematically close the connection after each RPC call. 

-- 
Alexandre Fayolle                              LOGILAB, Paris (France).
<A HREF="http://www.logilab.com">http://www.logilab.com</A>   <A HREF="http://www.logilab.fr">http://www.logilab.fr</A>  <A HREF="http://www.logilab.org">http://www.logilab.org</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 481 bytes
Desc: Digital signature
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/maay-dev/attachments/20051027/04ac43b5/attachment.pgp">https://lists.berlios.de/pipermail/maay-dev/attachments/20051027/04ac43b5/attachment.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000007.html">[Maay-dev] [Maay-svncheckins] r229 - trunk/maay
</A></li>
	<LI>Next message: <A HREF="000010.html">[Maay-dev] Re: [Maay-svncheckins] r229 - trunk/maay
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5">[ date ]</a>
              <a href="thread.html#5">[ thread ]</a>
              <a href="subject.html#5">[ subject ]</a>
              <a href="author.html#5">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/maay-dev">More information about the Maay-dev
mailing list</a><br>
</body></html>
